---
title: "AWS SAA学習記録"
emoji: "🛳"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---

# AWS全体像
### AWS Well-Architectedフレームワークとは
`AWS Well-Architectedフレームワーク`とは、サービスの活用のペストプラクティス集のこと

### AWS Well-Architectedフレームワークを構成するもの
- 運用上の優秀性
  - 運用面で考慮すべきことを記載してある
    - システムびモニタリングや変更管理
    - 継続的な運用プロセス
    - 手順の改善
    - 通常・障害時の運用業務 
- セキュリティ
  - AWS上のシステムとデータをどのように保護するかを記載してある
    - データの機密性と生合成の担保
    - 権限管理
    - セキュリティイベントの監視
    - 制御に関することなど
- 信頼性
  - AWSにおける障害防止、障害時の復旧について記載してある
    - 障害時における動的なコンピューティングリソースの獲得
    - 可用性の高いアーキテクチャに関すること
    > 可用性とは、継続稼働ができることをを指す
- パフォーマンス効率
  - AWSにおけるコンピューティングリソースの効率的な使用について記載してある
    - 性能要件
    - 需要の変化に応じた適切なリソースタイプの選定
    - パフォーマンスのモニタリング
- コスト最適化
  - AWSにおける不要なコストの回避や最適化について記載してある
    - 適切なコストの把握
    - 最適なリソースタイプの選定
    - 需要に応じたシステムのスケーリング

### AWSインフラストラクチャの概要
- リージョンとは
  - 場所・地域・範囲のこと
- アベイラビリティーゾーン(AZ)とは
  - リージョン内にある複数のデータセンターの集合体を指す
  > 余談.
  > 高可用性実現するには、マルチAZ構成が推奨されている.
  > 災害対策などでは、マルチリージョンで構成する.
- エッジロケーションとは
  - `Amazon CloudFront`のコンテンツや`Amazon Route53`のDNSサービスなどを提供するデータデンターのこと

### AWSサービスの範囲
- グローバルサービス
  - リージョンに依存しないサービスのこと(以下が該当する)
    - `AWS Identity and Access Management(IAM)`
    - `CloudFront`
    - `Route 53`
- リージョンサービス
  - 特定のリージョン内でのみ利用できるサービスのこと(以下が該当する)
    - `Amazon Virtual Private Cloud(VPC)`
    - `Amazon DynamoDB`
    - `AWS Lambda`
- アベイラビリティーゾーンサービス
  - 特定のAZ内で利用できるサービスのこと(以下が該当する)
    - `Amazon Elastic Compute Cloud(EC2)`
    - `Amazon Relational Database Service(RDS)`

### AWSサービス範囲の全体像

> ![service_icons](https://user-images.githubusercontent.com/77420123/180349405-25e732b5-1196-4dae-bd79-bceab82e5256.jpeg)
> 引用: いくらは神の食べ物様

### IAMサービスの概要
- AWSを利用するユーザーに対してAWSへのアクセスを安全に制御するための仕組みのこと
  - AWSアカウントに登録した直後はルートユーザーである
    - ルートユーザーは全ての権限を持っているので、一般的に操作は行わない
  - IAMユーザー・IAMグループの作成
    - 操作範囲を絞ってユーザー登録することで誤操作により危険を防ぐ
  - IAMポリシーによる権限付与
    - IAMユーザー・IAMグループ作成直後は権限付与されていない
    - IAMポリシーで適切に権限を付与することで各システムへのアクセス制御を行う

### IAMサービスを通じたAWS操作
- Webのマネジメントコンソールからログインして、操作する
- `AWS CLI`でコマンド操作する(以下が必要)
  - アクセスキーID
  - シークレットアクセスキー
- `AWS SDK`でプログラムからAPIとして呼び出す

### Amazon Virtual Private Cloud(VPC)
- **`Amazon Virtual Private Cloud(VPC)`**
  - AWS上で独立したプライベートネットワーク空間を作成できるサービスのこと
  - VPC作成の際の注意点
    - IPv4のVPCは、プライベートIPアドレスの範囲内で、16ビット以上28ビット以下伊那のCIDRを指定する必要がある
    > CIDRとは、`Classless Inter-Domain Routing`:IPアドレスのクラス分類を考慮せず、IPアドレスを割り当てる仕組み(ネットワークアドレスの「/１６」などが該当する)
    - 後述するVPC間の接続やオンプレミスとの接続を行う場合、IPアドレスの範囲が重複しな異様にする必要がある
    - IPv6のVPCは、56ビットで固定されている
- **サブネット**
  - VPC内に構成するネットワークセグメントのこと(ネットワークの分類的な意味合い)
    - パブリックサブネット
      - インターネットとの通信が可能なサブネットのこと
    - プライベートサブネット
      - インターネットと接続する必要がないサーバを配置する
      > インターネット接続の可/不可で分けて決めると、セキュリティ上も良い
- **インターネットゲートウェイ**
  - VPC内のリソースからインターネットへアクセスするためのゲートウェイのこと
    (インターネットゲートウェイをVPCにアタッチすることで、VPC内のリソースからアクセスすることができる)
- **ルートテーブル**
  - サブネット内のEC2インスタンスに対する静的ルーティングを定義するもの
    (設定はサブネット単位で行う)
    - インターネットゲートウェイを指定したサブネットがパブリックサブネット
    - インターネットゲートウェイを指定していないサブネットがプライベートサブネット
- **NATゲートウェイ**
  - NATゲートウェイには、プライベートサブネットからインターネットへ接続するNAT機能というものがある
  > NATゲートウェイの使い方は「インターネットからはアクセスされたくないけどインターネットへのアクセスは実施したい」というケースが主に想定される

なるほど、じゃあ上記のような時というのはどのような時に起きる??

### アクセス制御
- **セキュリティグループ**
  - EC2インスタンスに適用するファイアウォール機能のこと
    - EC2インスタンスから出る通信を制御するアウトバインド
    - EC2インスタンスへの通信を制御するインバウンド
  - 特徴
    - デフォルト設定は、アウトバウンドすべて許可、インバウンド全て拒否
    - ステートフルな制御が可能
    > ファイアウォール(`Firewall`)とは、企業などの社内ネットワークにインターネットを通して外部から侵入してくる不正アクセスや、社内ネットワークから外部への許可されていない通信から守るための“防火壁”のこと
- **ネットワークACL**
  - サブネット単位で設定するファイアウォール機能のこと

### VPCと外部接続
- **`AWS Direst Connect(DX)`**
  - オンプレミス環境とAWSの間の専用線で接続するサービスのこと
  > オンプレミスとは、システムの稼働やインフラの構築に必要となるサーバーやネットワーク機器、あるいはソフトウェアなどを自社で保有し運用するシステムの利用形態のこと
- **`Site to Site VPN`**
  - オンプレミス環境とAWSの間の専用線で接続するサービスのこと
    - `AWS Direst Connect`より品質は低下するが、低コストであり、短期間で挿入できるメリットがある
- **VPCピアリング**
  - 異なるVPC間をプライベート接続するサービスのこと
- **`AWS Transit Gateway`**
  - VPC内にハブの機能を持ったゲートウェイを配置するサービスのこと
- **VPCエンドポイント**
  - AWSのプライベートネットワークからAWSサービスへアクセス可能
  - ゲートウェイ型
    - ルートテーブルに指定されたターゲットに追加すること
  - インターフェイス型
    - APIコールに対して、インターネットを経由せずにプライベートに接続する

### VPC内で利用できるネットワークサービス
- **`Elastic Load Balancing(ELB)`**
  - EC2や特定のIPアドレスへのトラフィックを分散するロードバランシングサービスのこと
  (ここで登録されたEC2インスタンスを「バックエンドインスタンスという」)
  > トラフィックとは、インターネットやLANなどのコンピュータなどの通信回線において、一定時間内にネットワーク上で転送されるデータ量のこと
  > ロードバランサーとは負荷分散装置とも呼ばれ、外部からの通信（トラフィック）を複数のサーバーに分散する仕組みを提供する装置
- **ELBの種類**
  - `Classic Load Balancer(CLB)`
    - CLBに対するTCPリクエストをバックエンドインスタンスに振り分け、指定されたポートトラフィックを転送する
